{% extends "server_config.html" %}
{% block configName %}Mensagens ao Entrar/Sair{% endblock %}
{% block configContent %}

<form method="post">
<div class="pure-g" style="text-align: center;">
    <div class="pure-u-1 pure-u-md-7-8">
		<p class="toggleMainText">Ativar o módulo?</p>
	</div>
    <div class="pure-u-1 pure-u-md-1-8">
		<div class="switch">
		  <input type="checkbox" name="enableModule" value="true" {% if serverConfig.joinLeaveConfig.isEnabled == true %}checked{% endif %} id="cmn-toggle-1" class="cmn-toggle cmn-toggle-round" type="checkbox">
		  <label for="cmn-toggle-1"></label>
		</div>
	</div>
</div>
<hr>
<div id="hiddenIfDisabled">
	<div class="pure-g" style="text-align: center;">
		<div class="pure-u-1 pure-u-md-7-8">
			<p class="toggleMainText">Ativar as mensagens quando alguém entrar?</p>
		</div>
		<div class="pure-u-1 pure-u-md-1-8">
			<div class="switch">
			  <input type="checkbox" name="tellOnJoin" value="true" {% if serverConfig.joinLeaveConfig.tellOnJoin == true %}checked{% endif %} id="cmn-toggle-2" class="cmn-toggle cmn-toggle-round" type="checkbox">
			  <label for="cmn-toggle-2"></label>
			</div>
		</div>
	</div>
	<hr>
	<div class="pure-g" style="text-align: center;">
		<div class="pure-u-1 pure-u-md-7-8">
			<p class="toggleMainText">Ativar as mensagens quando alguém sair?</p>
		</div>
		<div class="pure-u-1 pure-u-md-1-8">
			<div class="switch">
			  <input type="checkbox" name="tellOnLeave" value="true" {% if serverConfig.joinLeaveConfig.tellOnLeave == true %}checked{% endif %} id="cmn-toggle-3" class="cmn-toggle cmn-toggle-round" type="checkbox">
			  <label for="cmn-toggle-3"></label>
			</div>
		</div>
	</div>
	<hr>
	<div class="pure-g" style="text-align: center;">
		<div class="pure-u-1 pure-u-md-7-8">
			<p class="toggleMainText">Ativar as mensagens quando alguém for banido?</p>
		</div>
		<div class="pure-u-1 pure-u-md-1-8">
			<div class="switch">
			  <input type="checkbox" name="tellOnBan" value="true" {% if serverConfig.joinLeaveConfig.tellOnBan == true %}checked{% endif %} id="cmn-toggle-5" class="cmn-toggle cmn-toggle-round" type="checkbox">
			  <label for="cmn-toggle-5"></label>
			</div>
		</div>
	</div>
	<hr>
	<div class="pure-g" style="text-align: center;">
		<div class="pure-u-1 pure-u-md-7-8">
			<p class="toggleMainText">Ativar as mensagens enviadas nas mensagens diretas do usuário quando alguém entrar?</p>
			<div class="toggleSubText">Útil caso você queria mostrar informações básicas sobre o servidor para um usuário mas não quer que fique cheio de mensagens inúteis toda hora que alguém entra.</div>
		</div>
		<div class="pure-u-1 pure-u-md-1-8">
			<div class="switch">
			  <input type="checkbox" name="tellOnPrivate" value="true" {% if serverConfig.joinLeaveConfig.tellOnPrivate == true %}checked{% endif %} id="cmn-toggle-4" class="cmn-toggle cmn-toggle-round" type="checkbox">
			  <label for="cmn-toggle-4"></label>
			</div>
		</div>
	</div>
	<hr>
	<div class="flavourText">Canal para anunciar quando alguém entrar</div>
	<select name="canalJoin">
		{% for textChannel in currentServerJda.getTextChannels %}
		{% if textChannel.canTalk %}
		<option value="{{ textChannel.getId }}" {% if textChannel.getId == serverConfig.joinLeaveConfig.canalJoinId %}selected="selected"{% endif %}>{{ textChannel.getName }}</option>
		{% endif %}
		{% endfor %}
	  </select>
	<hr>
	
	<div class="flavourText">Canal para anunciar quando alguém sair</div>
	<select name="canalLeave">
	  {% for textChannel in currentServerJda.getTextChannels %}
	  {% if textChannel.canTalk %}
	  <option value="{{ textChannel.getId }}" {% if textChannel.getId == serverConfig.joinLeaveConfig.canalLeaveId %}selected="selected"{% endif %}>{{ textChannel.getName }}</option>
	  {% endif %}
	  {% endfor %}
	</select>
	<hr>
	<div class="flavourText">Mensagem quando alguém entrar</div>
	<textarea id="joinMessage" name="joinMessage">{{ serverConfig.joinLeaveConfig.joinMessage }}</textarea>
	<hr>
	<div class="flavourText">Mensagem quando alguém sair</div>
	<textarea id="leaveMessage" name="leaveMessage">{{ serverConfig.joinLeaveConfig.leaveMessage }}</textarea>
	<hr>
	<div class="flavourText">Mensagem quando alguém entrar (via mensagem direta)</div>
	<textarea id="privateMessage" name="privateMessage">{{ serverConfig.joinLeaveConfig.joinPrivateMessage }}</textarea>
	<hr>
	<div class="flavourText">Mensagem quando alguém for banido (deixe vazio para usar a mesma mensagem de quando alguém sai)</div>
	<textarea id="banMessage" name="banMessage">{{ serverConfig.joinLeaveConfig.banMessage }}</textarea>
	<hr>
	<div class="flavourText">Varíaveis</div>
	<pre class="discordPre">{@user} - Menciona o usuário
{user} - Troca pelo nome do usuário
{nickname} - Troca pelo nickname do usuário e, caso ele não tenha nenhum, é usado o nome dele
{guild} - Troca pelo nome do servidor/guild</pre>
</div>
<hr>
<input class="button-success pure-button" type="submit" value="Salvar">
</form>
<script>
$("#cmn-toggle-1").click(function(e) {
	applyBlur()
});

function applyBlur() {
  var e = $("#hiddenIfDisabled");
  if ($('#cmn-toggle-1').is(':checked')) {
	e.removeClass();
	e.addClass("noBlur");
  } else {
    e.removeClass();
	e.addClass("blurSection");
  }
}

applyBlur();

autosize(document.querySelector('#joinMessage'));

autosize(document.querySelector('#leaveMessage'));

autosize(document.querySelector('#privateMessage'));
</script>
{% endblock %}